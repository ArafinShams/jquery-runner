/*!
 * jQuery-runner - v2.0.0 - 2013-01-17
 * https://github.com/jylauril/jquery-runner/
 * Copyright (c) 2013 Jyrki Laurila <https://github.com/jylauril>
 */
(function(e){var t={version:"2.0.0",name:"jQuery-runner"},n,r,i,s,o;r=function(e){return(e<10?"0":"")+e},i={},o=1,s=function(){return"runner"+o++},n=function(e,t){var n,i,s,o,u,a,f,l,c,h,p;l=[36e5,6e4,1e3,10],a=["",":",":","."],u="",o="",s=t.milliseconds,i=l.length,c=0,e<0&&(e=Math.abs(e),u="-");for(n=h=0,p=l.length;h<p;n=++h)f=l[n],e>=f&&(c=Math.floor(e/f),e-=c*f),(c||n>1||o)&&(n!==i-1||s)&&(o+=(o?a[n]:"")+r(c));return u+o};var u;u=function(){function t(n,r,o){var u;if(!(this instanceof t))return new t(n,r,o);this.items=n,e.extend(this.settings,r),u=this.id=s(),i[u]=this,n.each(function(t,n){e(n).data("runner",u)}),this.value(this.settings.startAt),(o||this.settings.autostart)&&this.start()}return t.prototype.running=!1,t.prototype.updating=!1,t.prototype.interval=null,t.prototype.total=0,t.prototype.lastTime=0,t.prototype.startTime=0,t.prototype.lastLap=0,t.prototype.lapTime=0,t.prototype.settings={autostart:!1,interval:20,countdown:!1,stopAt:null,startAt:0,milliseconds:!0,format:null},t.prototype.value=function(t){var n=this;this.items.each(function(r,i){r=e(i),r[r.is("input")?"val":"text"](n.format(t))})},t.prototype.format=function(t){var r;return r=this.settings.format,e.isFunction(r)?r(t,n,this.settings.milliseconds):n(t,this.settings)},t.prototype.update=function(){var t,n,r,i,s;if(!this.updating){this.updating=!0,r=this.settings,s=e.now(),i=r.stopAt,t=r.countdown,n=s-this.lastTime,this.lastTime=s,t?this.total-=n:this.total+=n;if(i!==null&&t&&this.total<=i||!t&&this.total>=i)this.total=i,this.stop();this.value(this.total),this.updating=!1}},t.prototype.fire=function(e){this.items.trigger(e,this.info())},t.prototype.start=function(){var t=this;this.running||(this.running=!0,this.startTime||this.reset(),this.lastTime=e.now(),this.interval=setInterval(function(){t.update()},this.settings.interval),this.fire("runnerStarted"))},t.prototype.stop=function(){this.running&&(this.running=!1,clearInterval(this.interval),this.update(),this.fire("runnerStopped"))},t.prototype.toggle=function(){this.running?this.stop():this.start()},t.prototype.lap=function(){var e,t;t=this.lastTime,e=t-this.lapTime;if(this.running||e)this.lastLap=e,this.lapTime=t;return t=this.format(this.lastLap),this.fire("runnerLap"),t},t.prototype.reset=function(){this.startTime=this.lapTime=this.lastTime=e.now(),this.total=this.settings.startAt,this.value(this.total)},t.prototype.info=function(){var e;return e=this.lastLap||0,{running:this.running,time:this.total,formattedTime:this.format(this.total),startTime:this.startTime,lapTime:e,formattedLapTime:this.format(e),settings:this.settings}},t}();if(!e)throw"["+t.name+"] jQuery library is required for this plugin to work";e.fn.runner=function(n,r,s){var o,a;n||(n="init"),typeof n=="object"&&(s=r,r=n,n="init"),o=this.data("runner"),a=o?i[o]:!1;switch(n){case"init":u(this,r,s);break;case"info":if(a)return a.info();break;case"start":case"stop":case"toggle":case"lap":case"reset":a&&a[n]();break;case"version":return t.version;default:e.error("["+t.name+"] Method "+n+" does not exist")}return this}})(window.jQuery);